{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '49000091-3868361750e1c7c48df9380e6';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 40;\n\nexport async function fetchImages(query, page = 1) {\n    if (!query.trim()) {\n        throw new Error('Search query is empty!');\n    }\n\n    const params = {\n        key: API_KEY,\n        q: encodeURIComponent(query),\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: PER_PAGE\n    };\n\n    try {\n        const response = await axios.get(BASE_URL, { params });\n        return response.data;\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        throw error;\n    }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst lightbox = new SimpleLightbox('.gallery a', { captionsData: 'alt', captionDelay: 250 });\n\nexport function renderImages(images, append = false) {\n    if (!append) {\n        gallery.innerHTML = '';\n    }\n\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <div class=\"image-item\">\n            <a href=\"${largeImageURL}\" class=\"gallery-item\">\n                <img src=\"${webformatURL}\" alt=\"${tags}\" />\n            </a>\n            <div class=\"metadata\">\n                <span>Likes: ${likes}</span>\n                <span>Views: ${views}</span>\n                <span>Comments: ${comments}</span>\n                <span>Downloads: ${downloads}</span>\n            </div>\n        </div>\n    `).join('');\n\n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    lightbox.refresh();\n}\n\nexport function showError(message) {\n    const errorMessage = document.querySelector('.error-message');\n    if (errorMessage) {\n        errorMessage.textContent = message;\n        errorMessage.style.display = 'block';\n    }\n}\n\nexport function showLoader() {\n    const loader = document.querySelector('#loader');\n    if (loader) {\n        loader.style.display = 'block';\n    }\n}\n\nexport function hideLoader() {\n    const loader = document.querySelector('#loader');\n    if (loader) {\n        loader.style.display = 'none';\n    }\n}\n\nexport function toggleLoadMore(show) {\n    const loadMoreBtn = document.querySelector('#load-more');\n    if (loadMoreBtn) {\n        loadMoreBtn.style.display = show ? 'block' : 'none';\n    }\n}","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, showError, showLoader, hideLoader, toggleLoadMore } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('#search-form');\nconst input = document.querySelector('#search');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.createElement('button');\n\nloadMoreBtn.id = 'load-more';\nloadMoreBtn.textContent = 'Load more';\nloadMoreBtn.style.display = 'none';\nloadMoreBtn.style.margin = '20px auto';\nloadMoreBtn.style.padding = '10px 20px';\nloadMoreBtn.style.border = 'none';\nloadMoreBtn.style.cursor = 'pointer';\ndocument.body.appendChild(loadMoreBtn);\n\nlet query = '';\nlet page = 1;\nconst PER_PAGE = 40;\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n\n    query = input.value.trim();\n    if (!query) {\n        iziToast.error({ title: 'Error', message: 'Please enter a search query!' });\n        return;\n    }\n\n    page = 1;\n    gallery.innerHTML = '';\n    toggleLoadMore(false);\n    showLoader();\n\n    try {\n        const data = await fetchImages(query, page);\n        hideLoader();\n\n        if (data.hits.length === 0) {\n            showError('Sorry, there are no images matching your search query. Please try again!');\n        } else {\n            renderImages(data.hits);\n            if (data.totalHits > PER_PAGE) {\n                toggleLoadMore(true);\n            }\n        }\n    } catch (error) {\n        hideLoader();\n        showError('Failed to fetch images. Please try again later.');\n        iziToast.error({ title: 'Error', message: 'Failed to fetch images. Please try again later.' });\n    }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    page += 1;\n    showLoader();\n\n    try {\n        const data = await fetchImages(query, page);\n        hideLoader();\n        renderImages(data.hits, true);\n\n        const totalPages = Math.ceil(data.totalHits / PER_PAGE);\n        if (page >= totalPages) {\n            toggleLoadMore(false);\n            iziToast.info({ title: 'Info', message: \"We're sorry, but you've reached the end of search results.\" });\n        }\n\n        smoothScroll();\n    } catch (error) {\n        hideLoader();\n        showError('Failed to fetch more images. Please try again later.');\n        iziToast.error({ title: 'Error', message: 'Failed to fetch more images. Please try again later.' });\n    }\n});\n\nfunction smoothScroll() {\n    const galleryItems = document.querySelectorAll('.image-item');\n    if (galleryItems.length > 0) {\n        const cardHeight = galleryItems[0].getBoundingClientRect().height;\n        window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n    }\n}"],"names":["API_KEY","BASE_URL","PER_PAGE","fetchImages","query","page","params","axios","error","gallery","lightbox","SimpleLightbox","renderImages","images","append","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showError","message","errorMessage","showLoader","loader","hideLoader","toggleLoadMore","show","loadMoreBtn","form","input","event","iziToast","data","totalPages","smoothScroll","galleryItems","cardHeight"],"mappings":"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"}