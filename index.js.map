{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '49000091-3868361750e1c7c48df9380e6';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 40;\n\nexport async function fetchImages(query, page = 1) {\n    if (!query.trim()) {\n        throw new Error('Search query is empty!');\n    }\n\n    const params = {\n        key: API_KEY,\n        q: encodeURIComponent(query),\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: PER_PAGE\n    };\n\n    try {\n        const response = await axios.get(BASE_URL, { params });\n        return response.data;\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        throw error;\n    }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function renderImages(images, append = false) {\n    const gallery = document.querySelector('.gallery');\n\n    if (!append) {\n        gallery.innerHTML = '';\n    }\n\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <div class=\"image-item\">\n            <a href=\"${largeImageURL}\" class=\"gallery-item\">\n                <img src=\"${webformatURL}\" alt=\"${tags}\" />\n            </a>\n            <div class=\"metadata\">\n                <span>Likes: ${likes}</span>\n                <span>Views: ${views}</span>\n                <span>Comments: ${comments}</span>\n                <span>Downloads: ${downloads}</span>\n            </div>\n        </div>\n    `).join('');\n\n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    new SimpleLightbox('.gallery a').refresh();\n}\n\nexport function showError(message) {\n    const errorMessage = document.querySelector('.error-message');\n    errorMessage.textContent = message;\n    errorMessage.style.display = 'block';\n}\n\nexport function showLoader() {\n    document.querySelector('#loader').style.display = 'block';\n}\n\nexport function hideLoader() {\n    document.querySelector('#loader').style.display = 'none';\n}\n\nexport function toggleLoadMore(show) {\n    const loadMoreBtn = document.querySelector('#load-more');\n    loadMoreBtn.style.display = show ? 'block' : 'none';\n}","import { fetchImages } from './js/pixabay-api';\nimport { renderImages, showError, showLoader, hideLoader, toggleLoadMore } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('#search-form');\nconst input = document.querySelector('#search');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.createElement('button');\n\nloadMoreBtn.id = 'load-more';\nloadMoreBtn.textContent = 'Load more';\nloadMoreBtn.style.display = 'none';\nloadMoreBtn.style.margin = '20px auto';\nloadMoreBtn.style.padding = '10px 20px';\nloadMoreBtn.style.border = 'none';\nloadMoreBtn.style.cursor = 'pointer';\ndocument.body.appendChild(loadMoreBtn);\n\nlet query = '';\nlet page = 1;\nconst PER_PAGE = 40;\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n\n    query = input.value.trim();\n    if (!query) {\n        iziToast.error({ title: 'Error', message: 'Please enter a search query!' });\n        return;\n    }\n\n    page = 1;\n    gallery.innerHTML = '';\n    toggleLoadMore(false);\n    showLoader();\n\n    try {\n        const data = await fetchImages(query, page);\n        hideLoader();\n\n        if (data.hits.length === 0) {\n            showError('Sorry, there are no images matching your search query. Please try again!');\n        } else {\n            renderImages(data.hits);\n            if (data.totalHits > PER_PAGE) {\n                toggleLoadMore(true);\n            }\n        }\n    } catch (error) {\n        hideLoader();\n        showError('Failed to fetch images. Please try again later.');\n        iziToast.error({ title: 'Error', message: 'Failed to fetch images. Please try again later.' });\n    }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    page += 1;\n    showLoader();\n\n    try {\n        const data = await fetchImages(query, page);\n        hideLoader();\n        renderImages(data.hits, true);\n\n        const totalPages = Math.ceil(data.totalHits / PER_PAGE);\n        if (page >= totalPages) {\n            toggleLoadMore(false);\n            iziToast.info({ title: 'Info', message: \"We're sorry, but you've reached the end of search results.\" });\n        }\n\n        smoothScroll();\n    } catch (error) {\n        hideLoader();\n        showError('Failed to fetch more images. Please try again later.');\n        iziToast.error({ title: 'Error', message: 'Failed to fetch more images. Please try again later.' });\n    }\n});\n\nfunction smoothScroll() {\n    const galleryItems = document.querySelectorAll('.image-item');\n    if (galleryItems.length > 0) {\n        const cardHeight = galleryItems[0].getBoundingClientRect().height;\n        window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n    }\n}"],"names":["API_KEY","BASE_URL","PER_PAGE","fetchImages","query","page","params","axios","error","renderImages","images","append","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","showError","message","errorMessage","showLoader","hideLoader","toggleLoadMore","show","loadMoreBtn","form","input","event","iziToast","data","totalPages","smoothScroll","galleryItems","cardHeight"],"mappings":"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"}